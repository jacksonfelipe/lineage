{% extends 'layouts/base.html' %}
{% load static i18n %}

{% block extrahead %}
<style>
.card p span {
  background-color: transparent !important;
  color: #000 !important;
}

.card .btn-link {
  font-size: 14px;
  color: #007bff;
  text-decoration: none;
}

.card .btn-link:hover {
  text-decoration: underline;
}
</style>
{% endblock extrahead %}

{% block content %}
<div class="container my-5">
  <div class="card shadow-lg border-0 bg-white rounded-4">
    <div class="card-body p-4">

      <!-- Sauda√ß√£o -->
      <div class="mb-4 text-center">
        <h2 class="fw-bold text-dark mb-1">
          {% trans "Bem-vindo," %} {{ request.user.first_name|default:request.user.username }} üëã
        </h2>
        <p class="text-muted">
          {% trans "Este √© o seu painel principal. Aqui voc√™ encontrar√° um resumo da sua conta." %}
        </p>
      </div>

      <!-- Linha 1: Carteira e Invent√°rio -->
      <div class="row g-4">
        <!-- Carteira -->
        <div class="col-md-6">
          <div class="card h-100 border-0 bg-success-subtle">
            <div class="card-body d-flex align-items-center">
              <div class="me-3">
                <i class="fas fa-wallet fa-2x text-success"></i>
              </div>
              <div>
                <h6 class="fw-bold text-success mb-1">{% trans "Carteira" %}</h6>
                {% if wallet %}
                  <p class="mb-0">
                    <strong>{% trans "Saldo:" %}</strong> R$ {{ wallet.saldo|floatformat:2 }}
                  </p>
                {% else %}
                  <p class="text-muted mb-0">{% trans "Nenhuma carteira encontrada." %}</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Invent√°rios -->
        <div class="col-md-6">
          <div class="card h-100 border-0 bg-primary-subtle">
            <div class="card-body d-flex align-items-center">
              <div class="me-3">
                <i class="fas fa-boxes fa-2x text-primary"></i>
              </div>
              <div>
                <h6 class="fw-bold text-primary mb-1">{% trans "Invent√°rios" %}</h6>
                {% if inventories %}
                  <ul class="mb-0 ps-3 small">
                    {% for inv in inventories %}
                      <li>{{ inv.character_name }} ({{ inv.account_name }}) 
                        <a href="{% url 'inventory:inventario_dashboard' %}" class="btn-link">
                          {% trans "Ver Invent√°rio" %}
                        </a>
                      </li>
                    {% endfor %}
                  </ul>
                {% else %}
                  <p class="text-muted mb-0">{% trans "Nenhum invent√°rio encontrado." %}</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Linha 2: Status de Apoiador e Leil√µes -->
      <div class="row g-4 mt-2">
        <!-- Apoiador -->
        <div class="col-md-6">
          <div class="card h-100 border-0 bg-warning-subtle">
            <div class="card-body d-flex align-items-center">
              <div class="me-3">
                <i class="fas fa-star fa-2x text-warning"></i>
              </div>
              <div>
                <h6 class="fw-bold text-warning mb-1">{% trans "Status de Apoiador" %}</h6>
                {% if is_apoiador %}
                  <p class="mb-0">
                    <strong>{% trans "Status:" %}</strong> {{ status }}
                    {% if image %}
                      <br><img src="{{ image }}" alt="Imagem do apoiador" class="img-thumbnail mt-1" width="80">
                    {% endif %}
                  </p>
                {% else %}
                  <p class="text-muted mb-0">{% trans "Voc√™ ainda n√£o √© um apoiador." %}</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- Leil√µes Criados -->
        <div class="col-md-6">
          <div class="card h-100 border-0 bg-info-subtle">
            <div class="card-body d-flex align-items-center">
              <div class="me-3">
                <i class="fas fa-gavel fa-2x text-info"></i>
              </div>
              <div>
                <h6 class="fw-bold text-info mb-1">{% trans "Seus Leil√µes" %}</h6>
                <p class="mb-0">
                  <strong>{% trans "Total criados:" %}</strong> {{ leiloes_user }}
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- A√ß√µes -->
      <div class="mt-4 d-flex justify-content-end">
        <a href="{% url 'auction:listar_leiloes' %}" class="btn btn-outline-primary me-2">
          <i class="fas fa-gavel me-1"></i> {% trans "Ir para Leil√£o" %}
        </a>
        <a href="{% url 'payment:novo_pedido' %}" class="btn btn-outline-success">
          <i class="fas fa-store me-1"></i> {% trans "Fazer Doa√ß√£o" %}
        </a>
      </div>

    </div>
  </div>
</div>

{% if dashboard %}
  <div class="container-fluid py-5">
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <div class="card shadow-sm bg-light rounded p-4">
          {% if translation %}
            {{ translation.content|safe }}
          {% else %}
            {{ dashboard.content|safe }}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% else %}
  <!-- Informa√ß√µes de painel se n√£o houver dashboard -->
  <div class="py-5 bg-dark text-white">
    <div class="container text-center">
      <img src="{% static 'assets/img/banner-pdl.png' %}" alt="{% trans 'Logo Lineage 2' %}" class="img-fluid mb-4" style="max-height: 240px;">
      <h1 class="display-5 fw-bold text-primary">{% trans 'Painel Definitivo Lineage - PDL' %}</h1>
      <p class="lead mb-4 text-primary">{% trans 'Gerenciamento de Servidores de Lineage 2 com Python e Django' %}</p>
      <p class="text-primary">{% trans 'A Solu√ß√£o Web Perfeita para Administra√ß√£o e Atra√ß√£o de Jogadores' %}</p>
    </div>
  </div>

  <div class="container py-5">
    <div class="row align-items-center mb-5">
      <div class="col-md-6">
        <h2 class="fw-bold">{% trans 'Por que usar Django e Python?' %}</h2>
        <p>{% trans 'Django √© uma framework poderosa, segura e com uma administra√ß√£o pronta para uso, ideal para gerenciar servidores privados de Lineage 2.' %}</p>
        <ul>
          <li>{% trans 'Desenvolvimento r√°pido e escal√°vel' %}</li>
          <li>{% trans 'Sistema de administra√ß√£o completo' %}</li>
          <li>{% trans 'Integra√ß√£o com APIs e bancos de dados' %}</li>
          <li>{% trans 'Alta seguran√ßa e flexibilidade' %}</li>
        </ul>
      </div>
      <div class="col-md-6">
        <img src="{% static 'assets/img/django-logo.png' %}" class="img-fluid" alt="{% trans 'Django Logo' %}">
      </div>
    </div>
  
    <div class="row mb-5">
      <div class="col-12">
        <h2 class="fw-bold text-center mb-4">{% trans 'Tecnologias de Ponta' %}</h2>
        <div class="row text-center">
          <div class="col-md-4 mb-4">
            <h5>{% trans 'Django' %}</h5>
            <p>{% trans 'Backbone s√≥lido com seguran√ßa e escalabilidade.' %}</p>
          </div>
          <div class="col-md-4 mb-4">
            <h5>{% trans 'Docker + Nginx' %}</h5>
            <p>{% trans 'Deploy e entrega eficientes em qualquer ambiente.' %}</p>
          </div>
          <div class="col-md-4 mb-4">
            <h5>{% trans 'Celery + Redis' %}</h5>
            <p>{% trans 'Execu√ß√£o de tarefas ass√≠ncronas com performance.' %}</p>
          </div>
        </div>
      </div>
    </div>
  
    <div class="row mb-5">
      <div class="col-md-6">
        <h3 class="fw-bold">{% trans 'Painel Administrativo' %}</h3>
        <ul>
          <li>{% trans 'Gerenciamento de jogadores e servidores' %}</li>
          <li>{% trans 'Eventos, estat√≠sticas e monitoramento' %}</li>
          <li>{% trans 'Integra√ß√£o com sistemas de pagamento' %}</li>
        </ul>
      </div>
      <div class="col-md-6">
        <h3 class="fw-bold">{% trans 'Site P√∫blico' %}</h3>
        <ul>
          <li>{% trans 'Cadastro, login e personaliza√ß√£o de conta' %}</li>
          <li>{% trans 'Status do servidor e rankings' %}</li>
          <li>{% trans 'Not√≠cias e suporte ao jogador' %}</li>
        </ul>
      </div>
    </div>
  
    <div class="row">
      <div class="col text-center">
        <h2 class="fw-bold mb-3">{% trans 'Participe do Futuro dos Servidores Privados' %}</h2>
        <p class="text-muted">{% trans 'O PDL √© open source e est√° em constante evolu√ß√£o. Contribua, implemente, personalize e transforme a forma como servidores Lineage 2 s√£o administrados.' %}</p>
        <a href="https://github.com/D3NKYT0/lineage" class="btn btn-primary btn-lg mt-3">{% trans 'Ver Projeto no GitHub' %}</a>
      </div>
    </div>
  </div>
{% endif %}
{% endblock content %}
