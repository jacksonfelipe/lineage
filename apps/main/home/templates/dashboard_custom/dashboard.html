{% extends 'layouts/base.html' %}
{% load static i18n %}

{% block extrahead %}
<style>
  /* Tipografia futurista */
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap');

  .gamer-card {
    background-color: #ffffff; /* Fundo claro */
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    border: 2px solid #6f42c1; /* Roxo neon */
    border-radius: 1rem;
    box-shadow: 0 0 15px rgba(111, 66, 193, 0.4);
    color: #212529;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .gamer-card:hover {
    transform: scale(1.02);
    box-shadow: 0 0 25px rgba(111, 66, 193, 0.6);
  }

  .gamer-card h6 {
    font-family: 'Orbitron', sans-serif;
    text-transform: uppercase;
    color: #6f42c1;
    font-size: 14px;
  }

  .gamer-inventory li {
    list-style: none;
    padding: 4px 0;
  }

  .gamer-inventory a {
    color: #0d6efd;
    font-size: 13px;
    font-weight: 500;
  }

  .gamer-inventory a:hover {
    text-decoration: underline;
    color: #0056b3;
  }

  .avatar-frame {
    border: 2px solid #ffc107;
    border-radius: 8px;
    box-shadow: 0 0 6px rgba(255, 193, 7, 0.6);
  }

  .btn-glow {
    border-radius: 10px;
    font-weight: bold;
    background: linear-gradient(to right, #0dcaf0, #6f42c1);
    border: none;
    color: #fff;
    padding: 10px 20px;
    text-shadow: 0 0 2px #000;
    transition: 0.3s ease-in-out;
  }

  .btn-glow:hover {
    box-shadow: 0 0 15px rgba(13, 202, 240, 0.7);
    transform: scale(1.03);
  }

  .text-muted {
    color: #6c757d !important;
  }

  hr.text-light {
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  /* T√≠tulo principal */
  h1.text-primary {
    color: #6f42c1 !important;
  }
</style>
{% endblock extrahead %}

{% block content %}
<div class="container py-5r">
  <div class="text-center mb-4">
    <h1 class="text-primary fw-bold">{% trans "Painel do Jogador" %}</h1>
    <p class="text-primary">{% trans "Tudo que voc√™ precisa em um s√≥ lugar." %}</p>
  </div>

  <div class="gamer-card p-4">
    <div class="row g-4 align-items-center">
      <div class="col-lg-8">
        <h2 class="fw-bold">
          {% trans "Ol√°," %} {{ request.user.first_name|default:request.user.username }} üëæ
        </h2>
        <p class="text-muted">{% trans "Este √© o seu painel principal. Confira seu progresso abaixo." %}</p>
      </div>
      <div class="col-lg-4 text-lg-end">
        {% if image %}
          <img src="{{ image }}" class="avatar-frame" width="80" alt="avatar">
        {% endif %}
      </div>
    </div>

    <hr class="text-light my-4" />

    <!-- Linha 1: Carteira e Status de Apoiador -->
    <div class="row g-4">
      <div class="col-md-6">
        <div class="gamer-card p-3 h-100">
          <h6><i class="fas fa-wallet me-2 text-success"></i>{% trans "Carteira" %}</h6>
          {% if wallet %}
            <p class="mb-0"><strong>{% trans "Saldo:" %}</strong> R$ {{ wallet.saldo|floatformat:2 }}</p>
          {% else %}
            <p class="text-muted">{% trans "Nenhuma carteira encontrada." %}</p>
          {% endif %}
        </div>
      </div>

      <div class="col-md-6">
        <div class="gamer-card p-3 h-100">
          <h6><i class="fas fa-star me-2 text-warning"></i>{% trans "Status de Apoiador" %}</h6>
          {% if is_apoiador %}
            <p class="mb-0"><strong>{% trans "Status:" %}</strong> {{ status }}</p>
          {% else %}
            <p class="text-muted">{% trans "Voc√™ ainda n√£o √© um apoiador." %}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Linha 2: Invent√°rios -->
    <div class="mt-4">
      <h6 class="text-info"><i class="fas fa-boxes me-2"></i>{% trans "Invent√°rios" %}</h6>
      {% if inventories %}
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3 gamer-inventory">
          {% for inv in inventories %}
          <div class="col">
            <div class="gamer-card p-3 h-100">
              <p class="mb-1">
                <strong>{{ inv.character_name }}</strong><br>
                <small class="text-muted">{{ inv.account_name }}</small>
              </p>
              <a href="{% url 'inventory:inventario_dashboard' %}" class="btn-link">{% trans "Ver Invent√°rio" %}</a>
            </div>
          </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">{% trans "Nenhum invent√°rio encontrado." %}</p>
      {% endif %}
    </div>

    <!-- Linha 3: Leil√µes -->
    <div class="row mt-4">
      <div class="col-md-6">
        <div class="gamer-card p-3 h-100">
          <h6><i class="fas fa-gavel me-2 text-info"></i>{% trans "Seus Leil√µes" %}</h6>
          <p class="mb-0"><strong>{% trans "Total criados:" %}</strong> {{ leiloes_user }}</p>
        </div>
      </div>
    </div>

    <!-- Experiencia -->
    <div class="mt-4">
      <h6 class="text-info"><i class="fas fa-medal me-2 text-primary"></i>{% trans "Experiencia" %}</h6>
      <div class="card bg-light border shadow-sm p-3 mb-3">
        <h6 class="fw-bold text-dark mb-2">N√≠vel: {{ perfil.level }}</h6>
        <div class="progress" style="height: 20px;">
          <div class="progress-bar bg-success" role="progressbar"
              style="width: {{ xp_percent }}%;" aria-valuenow="{{ perfil.xp }}"
              aria-valuemin="0" aria-valuemax="{{ perfil.xp_para_proximo_nivel }}">
            {{ xp_percent }}%
          </div>
        </div>
        <p class="mt-2 text-muted">XP: {{ perfil.xp }} / {{ perfil.xp_para_proximo_nivel }}</p>
        {% if ganhou_bonus %}
          <p class="text-success mt-1">üéâ B√¥nus di√°rio recebido! +25 XP</p>
        {% endif %}
      </div>
    </div>

    <!-- Conquistas -->
    <div class="row mt-4">
      <h6 class="text-info">{% trans "üèÜ Conquistas" %}</h6>
      {% if conquistas %}
        <div class="row g-3">
          {% for c in conquistas %}
            <div class="col-md-4">
              <div class="card border-0 shadow-sm p-3 text-center h-100">
                {% if c.icone %}
                  <img src="{{ c.icone.url }}" width="50" class="mb-2" />
                {% endif %}
                <h6 class="fw-bold">{{ c.nome }}</h6>
                <p class="small text-muted">{{ c.descricao }}</p>
              </div>
            </div>
          {% endfor %}
        </div>

        <!-- Pagina√ß√£o -->
        <div class="mt-4 text-center">
          <nav aria-label="Pagina√ß√£o das conquistas">
            <ul class="pagination justify-content-center">
              {% if page_obj.has_previous %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Anterior">
                    &laquo; {% trans "Anterior" %}
                  </a>
                </li>
              {% endif %}

              {% for num in page_obj.paginator.page_range %}
                <li class="page-item {% if page_obj.number == num %}active{% endif %}">
                  <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                </li>
              {% endfor %}

              {% if page_obj.has_next %}
                <li class="page-item">
                  <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Pr√≥ximo">
                    {% trans "Pr√≥ximo" %} &raquo;
                  </a>
                </li>
              {% endif %}
            </ul>
          </nav>
        </div>
      {% else %}
        <p class="text-muted">{% trans "Voc√™ ainda n√£o desbloqueou nenhuma conquista." %}</p>
      {% endif %}
    </div>

    <!-- A√ß√µes -->
    <div class="mt-5 text-end">
      <a href="{% url 'auction:listar_leiloes' %}" class="btn btn-outline-info btn-glow me-2">
        <i class="fas fa-gavel me-1"></i>{% trans "Ir para Leil√£o" %}
      </a>
      <a href="{% url 'payment:novo_pedido' %}" class="btn btn-outline-info btn-glow me-2">
        <i class="fas fa-donate me-1"></i>{% trans "Fazer Doa√ß√£o" %}
      </a>
    </div>
  </div>
</div>

{% if dashboard %}
  <div class="container-fluid py-5">
    <div class="row justify-content-center">
      <div class="col-lg-10 col-xl-8">
        <div class="card shadow-sm bg-light rounded p-4">
          {% if translation %}
            {{ translation.content|safe }}
          {% else %}
            {{ dashboard.content|safe }}
          {% endif %}
        </div>
      </div>
    </div>
  </div>
{% else %}
  <!-- Informa√ß√µes de painel se n√£o houver dashboard -->
  <div class="py-5 bg-dark text-white">
    <div class="container text-center">
      <img src="{% static 'assets/img/banner-pdl.png' %}" alt="{% trans 'Logo Lineage 2' %}" class="img-fluid mb-4" style="max-height: 240px;">
      <h1 class="display-5 fw-bold text-primary">{% trans 'Painel Definitivo Lineage - PDL' %}</h1>
      <p class="lead mb-4 text-primary">{% trans 'Gerenciamento de Servidores de Lineage 2 com Python e Django' %}</p>
      <p class="text-primary">{% trans 'A Solu√ß√£o Web Perfeita para Administra√ß√£o e Atra√ß√£o de Jogadores' %}</p>
    </div>
  </div>

  <div class="container py-5">
    <div class="row align-items-center mb-5">
      <div class="col-md-6">
        <h2 class="fw-bold">{% trans 'Por que usar Django e Python?' %}</h2>
        <p>{% trans 'Django √© uma framework poderosa, segura e com uma administra√ß√£o pronta para uso, ideal para gerenciar servidores privados de Lineage 2.' %}</p>
        <ul>
          <li>{% trans 'Desenvolvimento r√°pido e escal√°vel' %}</li>
          <li>{% trans 'Sistema de administra√ß√£o completo' %}</li>
          <li>{% trans 'Integra√ß√£o com APIs e bancos de dados' %}</li>
          <li>{% trans 'Alta seguran√ßa e flexibilidade' %}</li>
        </ul>
      </div>
      <div class="col-md-6">
        <img src="{% static 'assets/img/django-logo.png' %}" class="img-fluid" alt="{% trans 'Django Logo' %}">
      </div>
    </div>
  
    <div class="row mb-5">
      <div class="col-12">
        <h2 class="fw-bold text-center mb-4">{% trans 'Tecnologias de Ponta' %}</h2>
        <div class="row text-center">
          <div class="col-md-4 mb-4">
            <h5>{% trans 'Django' %}</h5>
            <p>{% trans 'Backbone s√≥lido com seguran√ßa e escalabilidade.' %}</p>
          </div>
          <div class="col-md-4 mb-4">
            <h5>{% trans 'Docker + Nginx' %}</h5>
            <p>{% trans 'Deploy e entrega eficientes em qualquer ambiente.' %}</p>
          </div>
          <div class="col-md-4 mb-4">
            <h5>{% trans 'Celery + Redis' %}</h5>
            <p>{% trans 'Execu√ß√£o de tarefas ass√≠ncronas com performance.' %}</p>
          </div>
        </div>
      </div>
    </div>
  
    <div class="row mb-5">
      <div class="col-md-6">
        <h3 class="fw-bold">{% trans 'Painel Administrativo' %}</h3>
        <ul>
          <li>{% trans 'Gerenciamento de jogadores e servidores' %}</li>
          <li>{% trans 'Eventos, estat√≠sticas e monitoramento' %}</li>
          <li>{% trans 'Integra√ß√£o com sistemas de pagamento' %}</li>
        </ul>
      </div>
      <div class="col-md-6">
        <h3 class="fw-bold">{% trans 'Site P√∫blico' %}</h3>
        <ul>
          <li>{% trans 'Cadastro, login e personaliza√ß√£o de conta' %}</li>
          <li>{% trans 'Status do servidor e rankings' %}</li>
          <li>{% trans 'Not√≠cias e suporte ao jogador' %}</li>
        </ul>
      </div>
    </div>
  
    <div class="row">
      <div class="col text-center">
        <h2 class="fw-bold mb-3">{% trans 'Participe do Futuro dos Servidores Privados' %}</h2>
        <p class="text-muted">{% trans 'O PDL √© open source e est√° em constante evolu√ß√£o. Contribua, implemente, personalize e transforme a forma como servidores Lineage 2 s√£o administrados.' %}</p>
        <a href="https://github.com/D3NKYT0/lineage" class="btn btn-primary btn-lg mt-3">{% trans 'Ver Projeto no GitHub' %}</a>
      </div>
    </div>
  </div>
{% endif %}
{% endblock content %}
