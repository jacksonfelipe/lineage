{% extends "layouts/base.html" %}
{% load i18n %}

{% block content %}
<div class="container mt-4">
  <h2 class="mb-4">Itens da Caixa #{{ box.id }} ({{ box.box_type.name }})</h2>

  <div class="d-flex justify-content-between mb-3">
    <a href="{% url 'games:box_item_add' box.id %}" class="btn btn-success">Adicionar Item</a>
    <a href="{% url 'games:box_list' %}" class="btn btn-secondary">Voltar para Lista de Caixas</a>
  </div>

  {% if items %}
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Item</th>
          <th>Imagem</th>
          <th>Raridade</th>
          <th>Chance (%)</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody>
        {% for item in items %}
        <tr>
          <td>{{ item.item.name }}</td>
          <td><img src="{{ item.item.image.url }}" alt="{{ item.item.name }}" width="50"></td>
          <td>{{ item.item.get_rarity_display }}</td>
          <td>{{ item.probability }}</td>
          <td>
            <a href="{% url 'games:box_item_edit' box.id item.id %}" class="btn btn-sm btn-primary">Editar</a>
            <a href="{% url 'games:box_item_delete' box.id item.id %}" class="btn btn-sm btn-danger">Excluir</a>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>Nenhum item cadastrado para esta caixa.</p>
  {% endif %}
</div>
{% endblock %}
